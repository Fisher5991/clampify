/*!
 * Clampify v1.1.1
 *
 * Copyright (c) 2017 Artem Vozhzhov <vojjov.artem@ya.ru>
 *
 * Licenced under the MIT licence.
 */
!function(t){var i=0,s=0,h=[],n=100,e=function Clampify(t,s){s=s||{};var h=++i;this.t=function(){return h},this.i=t,this.i.clampify=this,this.s=t.innerHTML;var n=s.endsWith||"\u2026",e=s.endsWithClass||"clampify-end";this.h=s.removeEndChars||/[.,?!\/\\:\-\s]+$/,this.o=!1!==s.hideOverflowY,this.setMaxLines(s.maxLines),this.u={overflowY:this.i.style.overflowY,maxHeight:this.i.style.maxHeight},this.v(),n instanceof Node?this.p=n.cloneNode(!0):(this.p=document.createElement("span"),this.p.className=e,this.p.appendChild(document.createTextNode(n))),this.l=document.createElement("span"),this.m=document.createElement("span"),this.m.appendChild(this.l),s.autoUpdate&&this.enableAutoUpdate()};if(e.setWindowResizeDelay=function(t){n=t<1?1:t},e.prototype.v=function(){if(this.g>0){var t=document.createElement("span");t.appendChild(document.createTextNode("\xa0")),this.i.innerHTML="",this.i.appendChild(t);var i=this.i.offsetHeight||this.i.clientHeight,s=t.offsetHeight;this.A=Math.max(i,s)*this.g,this.resetContent(),this.M()}else this.A=this.i.offsetHeight||this.i.clientHeight},e.prototype.N=function(){return this.m.offsetHeight>this.A},e.prototype.M=function(){this.o&&(this.i.style.overflowY="hidden"),this.i.style.maxHeight=this.A+"px"},e.prototype.T=function(){this.i.style.overflowY=this.u.overflowY,this.i.style.maxHeight=this.u.maxHeight},e.prototype.$=function(){this.l.innerHTML=this.i.innerHTML,this.i.innerHTML="",this.i.appendChild(this.m)},e.prototype.k=function(){this.i.removeChild(this.m),this.i.innerHTML=this.l.innerHTML},e.prototype.C=function(t){t=t||this.m,this.I=this.p.cloneNode(!0),t.appendChild(this.I)},e.prototype.L=function(t){(t=t||this.m).removeChild(this.I),this.I=null},e.prototype.U=function(t){return t.join(" ").replace(this.h,"")},e.prototype.H=function(t){if((t=t||this.l)instanceof Text){var i=t.textContent.split(" ");for(t.textContent=this.U(i);this.N()&&i.length>0;)i.pop(),t.textContent=this.U(i);if(!t.textContent){var s,h;t.previousSibling?(s=t.previousSibling,t.parentNode.removeChild(t)):(s=t.parentNode.previousSibling,(h=t.parentNode).parentNode.removeChild(h)),this.H(s)}}else{var n=t.cloneNode(!0);for(t.innerHTML="";n.childNodes.length>0;){var e=n.childNodes[0];if(t.appendChild(e),this.N()){this.H(e);break}}}},e.prototype.setMaxLines=function(t){t=parseInt(t),this.g=isNaN(t)?0:t},e.prototype.getMaxLines=function(){return this.g},e.prototype.resetContent=function(){this.i.innerHTML=this.s},e.prototype.truncate=function(){this.resetContent(),this.v(),this.$(),this.N()&&(this.C(),this.H(),this.L(),this.C(this.l)),this.k()},e.prototype.getId=function(){return this.t()},e.prototype.enableAutoUpdate=function(){h.push(this)},e.prototype.disableAutoUpdate=function(){for(var t=0,i=h.length;t<i;t++)if(this.getId()===h[t].getId()){h.splice(t,1);break}},e.prototype.destroy=function(){this.disableAutoUpdate(),this.resetContent(),this.T(),delete this.i.clampify},t.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){for(var t=0,i=h.length;t<i;t++)h[t].truncate()},n)}),t.Clampify=e,t.$clampify=function $clampify(t,i){return new e(t,i).truncate(),t},void 0!==t.jQuery){var o=t.jQuery,f=["getId","resetContent","truncate","destroy","enableAutoUpdate","disableAutoUpdate","setMaxLines","getMaxLines"];o.fn.clampify=function(t){var i=Array.prototype.slice.apply(arguments);return i.shift(),o(this).each(function(){if("string"==typeof t){if(f.indexOf(t)>-1&&this.clampify instanceof e)return"function"==typeof this.clampify[t]&&this.clampify[t].apply(this.clampify,i),o(this);t={}}return this.clampify instanceof e&&this.clampify.destroy(),$clampify(this,t)})}}}(window);