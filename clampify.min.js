/*!
 * Clampify v1.1.0
 *
 * Copyright (c) 2016 Artem Vozhzhov <vojjov.artem@ya.ru>
 *
 * Licenced under the MIT licence.
 */
!function(t){var i=0,s=0,h=[],n=100,e=function Clampify(t,s){s=s||{};var h=++i;this.t=function(){return h},this.i=t,this.i.clampify=this,this.s=t.innerHTML,this.h=document.createElement("span"),this.h.appendChild(document.createTextNode(" "));var n=s.endsWith||"…",e=s.endsWithClass||"clampify-end";this.o=s.removeEndChars||/[.,?!\/\\:\-\s]+$/,this.u=!1!==s.hideOverflowY,this.setMaxLines(s.maxLines),this.p={overflowY:this.i.style.overflowY,maxHeight:this.i.style.maxHeight},this.v(),n instanceof Node?this.m=n.cloneNode(!0):(this.m=document.createElement("span"),this.m.className=e,this.m.appendChild(document.createTextNode(n))),this.l=document.createElement("span"),this.g=document.createElement("span"),this.g.appendChild(this.l),s.autoUpdate&&this.enableAutoUpdate()};if(e.setWindowResizeDelay=function(t){n=t<1?1:t},e.prototype.v=function(){if(this.A>0){this.i.innerHTML="",this.i.appendChild(this.h);var t=this.i.offsetHeight||this.i.clientHeight,i=this.h.offsetHeight;this.M=Math.max(t,i)*this.A,this.resetContent(),this.N()}else this.M=this.i.offsetHeight||this.i.clientHeight},e.prototype.T=function(){return this.g.offsetHeight>this.M},e.prototype.N=function(){this.u&&(this.i.style.overflowY="hidden"),this.i.style.maxHeight=this.M+"px"},e.prototype.$=function(){this.i.style.overflowY=this.p.overflowY,this.i.style.maxHeight=this.p.maxHeight},e.prototype.k=function(){this.l.innerHTML=this.i.innerHTML,this.i.innerHTML="",this.i.appendChild(this.g)},e.prototype.C=function(){this.i.innerHTML=this.l.innerHTML},e.prototype.I=function(t){(t=t||this.g).appendChild(this.m)},e.prototype.L=function(t){(t=t||this.g).removeChild(this.m)},e.prototype.U=function(t){return t.join(" ").replace(this.o,"")},e.prototype.H=function(t){if((t=t||this.l)instanceof Text){var i=t.textContent.split(" ");for(t.textContent=this.U(i);this.T()&&i.length>0;)i.pop(),t.textContent=this.U(i);if(!t.textContent){var s;t.previousSibling?(s=t.previousSibling,t.parentNode.removeChild(t)):(s=t.parentNode.previousSibling,t.parentNode.parentNode.removeChild(t.parentNode)),this.H(s)}}else{var h=t.cloneNode(!0);for(t.innerHTML="";h.childNodes.length>0;){var n=h.childNodes[0];if(t.appendChild(n),this.T()){this.H(n);break}}}},e.prototype.setMaxLines=function(t){t=parseInt(t),this.A=isNaN(t)?0:t},e.prototype.getMaxLines=function(){return this.A},e.prototype.resetContent=function(){this.i.innerHTML=this.s},e.prototype.truncate=function(){this.resetContent(),this.v(),this.k(),this.T()&&(this.I(),this.H(),this.L(),this.I(this.l)),this.C()},e.prototype.getId=function(){return this.t()},e.prototype.enableAutoUpdate=function(){h.push(this)},e.prototype.disableAutoUpdate=function(){for(var t=0,i=h.length;t<i;t++)if(this.getId()===h[t].getId()){h.splice(t,1);break}},e.prototype.destroy=function(){this.disableAutoUpdate(),this.resetContent(),this.$(),delete this.i.clampify},t.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){for(var t=0,i=h.length;t<i;t++)h[t].truncate()},n)}),t.Clampify=e,t.$clampify=function $clampify(t,i){return new e(t,i).truncate(),t},void 0!==t.jQuery){var o=t.jQuery,f=["getId","resetContent","truncate","destroy","enableAutoUpdate","disableAutoUpdate","setMaxLines","getMaxLines"];o.fn.clampify=function(t){var i=Array.prototype.slice.apply(arguments);return i.shift(),o(this).each(function(){if("string"==typeof t){if(f.indexOf(t)>-1&&this.clampify instanceof e)return"function"==typeof this.clampify[t]&&this.clampify[t].apply(this.clampify,i),o(this);t={}}return this.clampify instanceof e&&this.clampify.destroy(),$clampify(this,t)})}}}(window);